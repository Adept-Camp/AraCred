{"version":3,"sources":["components/Panel/ViewFunding/Issue.js","components/Panel/ViewFunding/ViewFunding.js","components/Panel/ViewFunding/index.js"],"names":["Issue","balance","expLevel","deadline","hours","number","repo","tokenSymbol","title","workStatus","theme","textSecondary","Date","addSuffix","BOUNTY_STATUS","padding","BOUNTY_BADGE_COLOR","bg","fg","dp","toString","propTypes","issueShape","isRequired","Wrap","styled","div","Left","Right","Title","Text","Block","Details","attrs","color","textTertiary","size","Spacer","props","Dot","ViewFunding","calcTotalFunding","issues","totalsByToken","reduce","group","issue","total","symbol","plus","Object","values","map","createdBy","fundingEventId","appState","tokens","tokenObj","token","addr","decimals","filter","i","data","key","bountySettings","expLvls","exp","name","url","login","join","length","PropTypes","shape","avatarUrl","string","Grid","contentBorder","Half","Full","Label"],"mappings":"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","file":"ViewFunding.adc25ec7.js","sourceRoot":"../app","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\n\nimport { Badge, Text, theme } from '@aragon/ui'\nimport { formatDistance } from 'date-fns'\nimport { issueShape } from '../../../utils/shapes.js'\n\nimport { BOUNTY_STATUS, BOUNTY_BADGE_COLOR } from '../../../utils/bounty-status'\n\nconst Issue = ({\n  balance,\n  expLevel,\n  deadline,\n  hours,\n  number,\n  repo,\n  tokenSymbol,\n  title,\n  workStatus,\n}) => (\n  <Wrap>\n    <Left>\n      <Text.Block color={theme.textSecondary} size=\"small\">\n        {repo} #{number}\n      </Text.Block>\n      <Title>{title}</Title>\n      <Details>\n        <span>{hours} hours</span>\n        <Dot />\n        <span>{expLevel}</span>\n        <Dot />\n        <span>\n          Due{' '}\n          {formatDistance(new Date(deadline), new Date(), { addSuffix: true })}\n        </span>\n      </Details>\n    </Left>\n    <Right>\n      {BOUNTY_STATUS[workStatus] && (\n        <Badge\n          style={{ padding: '10px' }}\n          background={BOUNTY_BADGE_COLOR[workStatus].bg}\n          foreground={BOUNTY_BADGE_COLOR[workStatus].fg}\n        >\n          {balance.dp(3).toString() + ' ' + tokenSymbol}\n        </Badge>\n      )}\n    </Right>\n  </Wrap>\n)\n\nIssue.propTypes = issueShape.isRequired\n\nconst Wrap = styled.div`\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  margin-left: -1em;\n  margin-top: -7px;\n  > * {\n    margin-left: 1em;\n    margin-top: 7px;\n  }\n`\nconst Left = styled.div`\n  flex: 1;\n`\nconst Right = styled.div`\n  flex: 0 0 1px;\n`\nconst Title = styled(Text.Block)`\n  margin: 5px 0 7px;\n`\nconst Details = styled(Text.Block).attrs({\n  color: theme.textTertiary,\n  size: 'xsmall',\n})`\n  white-space: nowrap;\n`\n\n// Ensures screen readers don't smash adjacent items together\nconst Spacer = props => <span {...props}> </span>\n\n// Adds extra visual distinction to Spacer with a glyph that is:\n//   * ignored by screen readers\n//   * not selected when selecting surrounding text for copy/paste\nexport const Dot = styled(Spacer).attrs({\n  'aria-hidden': true,\n})`\n  :before {\n    content: 'Â·';\n    margin-left: 6px;\n    margin-right: 6px;\n  }\n`\n\nexport default Issue\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport { useAragonApi } from '../../../api-react'\nimport { IdentityBadge, Text, theme } from '@aragon/ui'\nimport BigNumber from 'bignumber.js'\n\nimport Issue, { Dot } from './Issue'\n\nconst calcTotalFunding = issues => {\n  const totalsByToken = issues.reduce((group, issue) => {\n    group[issue.tokenSymbol] = group[issue.tokenSymbol] || {\n      total: 0,\n      symbol: issue.tokenSymbol,\n    }\n    group[issue.tokenSymbol].total = issue.balance.plus(\n      group[issue.tokenSymbol].total\n    )\n    return group\n  }, {})\n\n  return Object.values(totalsByToken).map(\n    ({ total, symbol }) => `${total.dp(3).toString()} ${symbol}`\n  )\n}\n\nconst ViewFunding = ({ createdBy, fundingEventId }) => {\n  const { appState } = useAragonApi()\n  const tokens = appState.tokens.reduce((tokenObj, token) => {\n    tokenObj[token.addr] = {\n      symbol: token.symbol,\n      decimals: token.decimals,\n    }\n    return tokenObj\n  }, {})\n\n  const description = 'Funding Request cannot be retrieved at this time; this feature will be completed soon.' // FIXME: how to retrieve this?\n  const issues = appState.issues\n    .filter(i => i.data.key === fundingEventId)\n    .map(i => ({\n      balance: BigNumber(i.data.balance).div(\n        BigNumber(10 ** tokens[i.data.token].decimals)\n      ),\n      expLevel: appState.bountySettings.expLvls[i.data.exp].name,\n      deadline: i.data.deadline,\n      hours: i.data.hours,\n      number: i.data.number,\n      repo: i.data.repo,\n      title:\n        i.data.title ||\n        'Issue list cannot be retrieved at this time; this feature will be completed soon.', // FIXME: this attr is in `issue` returned from Issues.js, but not in appState.issues\n      tokenSymbol: tokens[i.data.token].symbol,\n      url: i.data.url || 'https://github.com/404', // FIXME: this attr is in `issue` returned from Issues.js, but not in appState.issues\n      workStatus: i.data.workStatus,\n    }))\n\n  return (\n    <Grid>\n      <Half>\n        <Label>Created By</Label>\n        <IdentityBadge entity={createdBy.login} />\n      </Half>\n      <Half>\n        <Label>Status</Label>\n        {issues[0].workStatus}\n      </Half>\n      <Full>\n        <Label>Description</Label>\n        {description}\n      </Full>\n      <Half>\n        <Label>Total Funding</Label>\n        {calcTotalFunding(issues).join(<Dot />)}\n      </Half>\n      <Half>\n        <Label>Total Issues</Label>\n        {issues.length}\n      </Half>\n      {issues.map(issue => (\n        <Full key={issue.number}>\n          <Issue key={issue.number} {...issue} />\n        </Full>\n      ))}\n    </Grid>\n  )\n}\n\nViewFunding.propTypes = {\n  createdBy: PropTypes.shape({\n    avatarUrl: PropTypes.string.isRequired,\n    login: PropTypes.string.isRequired,\n    url: PropTypes.string.isRequired,\n  }).isRequired,\n  fundingEventId: PropTypes.string.isRequired,\n}\n\nconst Grid = styled.div`\n  background: ${theme.contentBorder};\n  display: grid;\n  grid-gap: 1px;\n  grid-template-columns: 50% 50%;\n  margin: 0 -30px;\n  padding-top: 1px;\n  > * {\n    background: white;\n    padding: 30px;\n  }\n`\nconst Half = styled.div`\n  grid-column: span 1;\n`\nconst Full = styled.div`\n  grid-column: span 2;\n`\nconst Label = styled(Text.Block).attrs({\n  size: 'small',\n  color: theme.textTertiary,\n})`\n  margin-bottom: 15px;\n  text-transform: uppercase;\n  white-space: nowrap;\n`\n\nexport default ViewFunding\n","/* eslint-disable import/no-unused-modules */\nexport { default } from './ViewFunding'\n"]}