parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Wpk8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=m;var e=s(require("styled-components")),t=i(require("react")),r=require("../../../api-react"),a=require("@aragon/ui"),n=require("../../Shared"),o=require("../../../store/eventTypes"),u=require("../../../utils/github");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function s(e){return e&&e.__esModule?e:{default:e}}var c=e.default.div.withConfig({displayName:"AuthorizeGitHub___StyledDiv",componentId:"ihdrr7-0"})(["text-align:center;margin-top:","px"],e=>e._css);const p=()=>t.default.createElement(c,{_css:15*a.GU},t.default.createElement(n.LoadingAnimation,null)),d="public_repo";let f=null;function m(){const{api:e}=(0,r.useAragonApi)(),[n,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>(window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}));const i=(0,t.useCallback)(async t=>{if(f&&t.source===f&&(f=null,"popup"===t.data.from&&"code"===t.data.name)){const a=t.data.value;try{const t=await(0,u.getToken)(a);e.emitTrigger(o.REQUESTED_GITHUB_TOKEN_SUCCESS,{status:u.STATUS.AUTHENTICATED,scope:d,token:t})}catch(r){e.emitTrigger(o.REQUESTED_GITHUB_TOKEN_FAILURE,{status:u.STATUS.FAILED,scope:null,token:null})}}},[]),s=(0,t.useCallback)(()=>{l(!0),f=(0,u.githubPopup)(f,d)},[]);return n?t.default.createElement(p,null):t.default.createElement(t.default.Fragment,null,t.default.createElement("br",null),t.default.createElement(a.Text.Block,{size:"xlarge"},"We’re going to need more permissions"),t.default.createElement("br",null),t.default.createElement(a.Text.Block,null,"The Projects app can make GitHub issues on your behalf, but to do that you need to increase the level of authorization granted to the app. GitHub calls this level of permissions the “",t.default.createElement(a.Link,{href:"https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/#available-scopes"},"public_repo scope"),"”.",t.default.createElement("br",null),t.default.createElement("br",null),"Granting this permission does not give any third party access to your GitHub account."," ",t.default.createElement(a.Link,{href:"https://autark.gitbook.io/open-enterprise/apps/projects#github-authorization"},"Read here")," for more details."),t.default.createElement("br",null),t.default.createElement(a.Button,{onClick:s,mode:"strong"},"I’m ready, authorize extra GitHub permissions"))}
},{"styled-components":"Nqwh","react":"SAdv","../../../api-react":"wmP9","@aragon/ui":"bbWz","../../Shared":"BsM7","../../../store/eventTypes":"1KRf","../../../utils/github":"7PvT"}],"C4uA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("@babel/runtime/helpers/defineProperty")),t=f(require("styled-components")),r=f(require("react")),a=f(require("prop-types")),i=require("react-apollo"),n=require("../../../api-react"),l=require("@aragon/ui"),s=require("../../../utils/gql-queries.js"),o=require("../../Form"),u=require("../../Shared"),c=require("../../Panel"),d=require("../../../context/DecoratedRepos"),p=f(require("./AuthorizeGitHub"));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function g(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?m(Object(a),!0).forEach(function(r){(0,e.default)(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}const h=()=>r.default.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",flexDirection:"column"}},r.default.createElement(u.LoadingAnimation,{style:{marginBottom:"32px"}}),"Creating issue...");var b=t.default.div.withConfig({displayName:"NewIssue___StyledDiv",componentId:"sc-1ngpvpt-0"})(["margin:","px 0"],e=>e._css);class y extends r.default.PureComponent{constructor(...t){super(...t),(0,e.default)(this,"state",y.initialState),(0,e.default)(this,"projectChange",e=>{this.setState({selectedProject:e})}),(0,e.default)(this,"titleChange",e=>{this.setState({title:e.target.value})}),(0,e.default)(this,"descriptionChange",e=>{this.setState({description:e.target.value})}),(0,e.default)(this,"labelsChange",e=>{this.setState({labels:e.target.value})}),(0,e.default)(this,"canSubmit",()=>!(""!==this.state.title&&this.state.selectedProject>0))}componentDidUpdate(e,t){if(this.state!==t){const e=g({},this.state);this.setState(g({},e))}}render(){const{title:e,description:t,selectedProject:a}=this.state,{reposManaged:n}=this.props,{projectChange:u,titleChange:c,descriptionChange:d}=this,p="string"==typeof n?"No repos":["Select a project",...n.map(e=>e.name)],f="string"==typeof n?[]:n.map(e=>e.id),m=a>0?f[a-1]:"";return r.default.createElement(b,{_css:2*l.GU},r.default.createElement(i.Mutation,{mutation:s.NEW_ISSUE,variables:{title:e,description:t,id:m},onError:console.error},(e,t)=>{const{data:i,loading:n,error:s,called:f}=t;if(!f)return r.default.createElement(o.Form,{onSubmit:e,submitText:"Submit Issue",submitDisabled:this.canSubmit()},r.default.createElement(l.Field,{label:"Project"},r.default.createElement(l.DropDown,{items:p,selected:a,onChange:u,wide:!0,required:!0})),r.default.createElement(l.Field,{label:"Title"},r.default.createElement(l.TextInput,{onChange:c,required:!0,wide:!0})),r.default.createElement(l.Field,{label:"Description"},r.default.createElement(l.TextInput.Multiline,{rows:3,style:{resize:"none",height:"auto",paddingTop:"5px",paddingBottom:"5px"},onChange:d,wide:!0})));if(n)return r.default.createElement(h,null);if(s)return r.default.createElement("div",null,"Error");const{createIssue:m}=i;return m&&this.props.closePanel(),null}))}}(0,e.default)(y,"propTypes",{closePanel:a.default.func.isRequired,reposManaged:a.default.oneOfType([a.default.string,a.default.arrayOf(a.default.shape({name:a.default.string,id:a.default.string}))]).isRequired}),(0,e.default)(y,"initialState",{selectedProject:0,project:0,title:"",description:"",labels:""});const j=()=>{const{closePanel:e}=(0,c.usePanelManagement)(),t=(0,d.useDecoratedRepos)(),{appState:{github:a}}=(0,n.useAragonApi)();if(!a.scope)return r.default.createElement(p.default,null);const i=t?t.map(e=>({name:e.metadata.name,id:e.data._repo})):"No repos",l=(t||[]).map(e=>e.data._repo);return r.default.createElement(y,{closePanel:e,reposManaged:i,reposIds:l})};var P=j;exports.default=P;
},{"@babel/runtime/helpers/defineProperty":"lsuE","styled-components":"Nqwh","react":"SAdv","prop-types":"yu5W","react-apollo":"NONX","../../../api-react":"wmP9","@aragon/ui":"bbWz","../../../utils/gql-queries.js":"zZqh","../../Form":"KB8S","../../Shared":"BsM7","../../Panel":"YykG","../../../context/DecoratedRepos":"FzxR","./AuthorizeGitHub":"Wpk8"}],"OUrO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}});var e=t(require("./NewIssue"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./NewIssue":"C4uA"}]},{},[], null)
//# sourceMappingURL=NewIssue.eabc2a04.js.map