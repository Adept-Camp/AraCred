"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
Object.defineProperty(exports, "killProcessOnPort", {
  enumerable: true,
  get: function () {
    return _killPort.default;
  }
});
exports.isPortTaken = void 0;

var _killPort = _interopRequireDefault(require("kill-port"));

var _net = _interopRequireDefault(require("net"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const isPortTaken = async (port, opts) => {
  opts = Object.assign({
    timeout: 1000
  }, opts);
  return new Promise(resolve => {
    const socket = new _net.default.Socket();

    const onError = () => {
      socket.destroy();
      resolve(false);
    };

    socket.setTimeout(opts.timeout);
    socket.on('error', onError);
    socket.on('timeout', onError);
    socket.connect(port, opts.host, () => {
      socket.end();
      resolve(true);
    });
  });
};

exports.isPortTaken = isPortTaken;
//# sourceMappingURL=ports.js.map