{"version":3,"sources":["../../src/node/ports.js"],"names":["isPortTaken","port","opts","Object","assign","timeout","Promise","resolve","socket","net","Socket","onError","destroy","setTimeout","on","connect","host","end"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;;;AAIO,MAAMA,WAAW,GAAG,OAAOC,IAAP,EAAaC,IAAb,KAAsB;AAC/CA,EAAAA,IAAI,GAAGC,MAAM,CAACC,MAAP,CAAc;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAAd,EAAiCH,IAAjC,CAAP;AAEA,SAAO,IAAII,OAAJ,CAAYC,OAAO,IAAI;AAC5B,UAAMC,MAAM,GAAG,IAAIC,aAAIC,MAAR,EAAf;;AAEA,UAAMC,OAAO,GAAG,MAAM;AACpBH,MAAAA,MAAM,CAACI,OAAP;AACAL,MAAAA,OAAO,CAAC,KAAD,CAAP;AACD,KAHD;;AAKAC,IAAAA,MAAM,CAACK,UAAP,CAAkBX,IAAI,CAACG,OAAvB;AACAG,IAAAA,MAAM,CAACM,EAAP,CAAU,OAAV,EAAmBH,OAAnB;AACAH,IAAAA,MAAM,CAACM,EAAP,CAAU,SAAV,EAAqBH,OAArB;AAEAH,IAAAA,MAAM,CAACO,OAAP,CAAed,IAAf,EAAqBC,IAAI,CAACc,IAA1B,EAAgC,MAAM;AACpCR,MAAAA,MAAM,CAACS,GAAP;AACAV,MAAAA,OAAO,CAAC,IAAD,CAAP;AACD,KAHD;AAID,GAhBM,CAAP;AAiBD,CApBM","sourcesContent":["import killProcessOnPort from 'kill-port'\nimport net from 'net'\n\nexport { killProcessOnPort }\n\nexport const isPortTaken = async (port, opts) => {\n  opts = Object.assign({ timeout: 1000 }, opts)\n\n  return new Promise(resolve => {\n    const socket = new net.Socket()\n\n    const onError = () => {\n      socket.destroy()\n      resolve(false)\n    }\n\n    socket.setTimeout(opts.timeout)\n    socket.on('error', onError)\n    socket.on('timeout', onError)\n\n    socket.connect(port, opts.host, () => {\n      socket.end()\n      resolve(true)\n    })\n  })\n}\n"],"file":"ports.js"}