"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

var _aragonjsWrapper = require("../helpers/aragonjs-wrapper");

async function _default({
  dao,
  app,
  method,
  params,
  apm,
  web3,
  wsProvider,
  gasPrice,
  progressHandler = () => {}
}) {
  const wrapper = await (0, _aragonjsWrapper.initAragonJS)(dao, apm.ensRegistryAddress, {
    ipfsConf: apm.ipfs,
    gasPrice,
    provider: wsProvider || web3.currentProvider,
    accounts: await web3.eth.getAccounts()
  });
  progressHandler(1);
  const transactionPath = (await (0, _aragonjsWrapper.getTransactionPath)(app, method, params, wrapper))[0];
  if (!transactionPath) throw new Error('Cannot find transaction path for executing action');
  progressHandler(2);
  return {
    transactionPath,
    receipt: await web3.eth.sendTransaction(transactionPath)
  };
}
//# sourceMappingURL=exec.js.map